<?xml version="1.0" encoding="UTF-8"?>
<ContentPage xmlns="http://xamarin.com/schemas/2014/forms"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:HodlWallet.Core.ViewModels"
             xmlns:i18n="clr-namespace:HodlWallet.UI.Extensions.I18n"
             xmlns:zxcm="clr-namespace:ZXing.Common;assembly=zxing.portable"
             xmlns:zxing="clr-namespace:ZXing.Net.Mobile.Forms;assembly=ZXing.Net.Mobile.Forms" 
             x:Class="HodlWallet.UI.Views.ReceiveView"
             Title="{i18n:Translate Receive.title}"
             BackgroundColor="{DynamicResource Bg}">
    <ContentPage.BindingContext>
        <vm:ReceiveViewModel />
    </ContentPage.BindingContext>
    <ContentPage.Content>
        <FlexLayout Direction="Column">
            <StackLayout FlexLayout.Grow="2" BackgroundColor="{DynamicResource Bg2}">
                <StackLayout HeightRequest="50" Orientation="Horizontal" HorizontalOptions="Center">
                    <Image Source="caret_down_filled.png" HeightRequest="40" />
                </StackLayout>
                <Label Text="{i18n:Translate Text=Receive.uniqueAddress}" HorizontalOptions="Center" FontSize="Subtitle" FontFamily="{StaticResource Key=Sans-Bold}" />
                <Label Text="{Binding Address}" HorizontalOptions="Center" WidthRequest="250" XAlign="Center" FontSize="Caption" TextColor="{DynamicResource Fg2}" FontFamily="{StaticResource Key=Mono-Regular}">
                    <Label.GestureRecognizers>
                        <TapGestureRecognizer Tapped="Address_Tapped" NumberOfTapsRequired="1" />
                    </Label.GestureRecognizers>
                </Label>
            </StackLayout>
            <StackLayout FlexLayout.Grow="8" BackgroundColor="{DynamicResource Bg}">
                <StackLayout HeightRequest="240" Orientation="Horizontal">
                    <!-- Use this for debuging due to a break on Hot Reaload for ZXingBarcodeImageView -->
                    <!--<Image Source="logo.png" WidthRequest="180" HeightRequest="180" />-->
                    <zxing:ZXingBarcodeImageView x:Name="BarCodeImageView"
                                                 VerticalOptions="Center"
                                                 HorizontalOptions="CenterAndExpand"
                                                 BarcodeFormat="QR_CODE"
                                                 BarcodeValue="{Binding Address}"
                                                 HeightRequest="180"
                                                 WidthRequest="180">
                        <zxing:ZXingBarcodeImageView.BarcodeOptions>
                            <zxcm:EncodingOptions Height="180" Width="180" Margin="0" />
                        </zxing:ZXingBarcodeImageView.BarcodeOptions>
                    </zxing:ZXingBarcodeImageView>

                    <StackLayout.GestureRecognizers>
                        <TapGestureRecognizer Tapped="Address_Tapped" NumberOfTapsRequired="1" />
                    </StackLayout.GestureRecognizers>
                </StackLayout>

                <Frame HeightRequest="80" BackgroundColor="{DynamicResource Bg2}" CornerRadius="5" Margin="30,0,30,10">
                    <StackLayout>
                        <Label Text="AMOUNT" FontFamily="{StaticResource Key=Sans-Bold}" TextColor="{DynamicResource Fg}" />
                        <Entry Placeholder="0.0"
                               FontFamily="{StaticResource Mono-Regular}"
                               Keyboard="Numeric"
                               ReturnType="Done"
                               TextColor="{DynamicResource FgSuccess}" />
                    </StackLayout>
                </Frame>

                <StackLayout Orientation="Horizontal" HorizontalOptions="Center" Spacing="24">
                    <StackLayout Orientation="Horizontal" HorizontalOptions="Center" Spacing="12">
                        <Frame CornerRadius="50" BackgroundColor="{DynamicResource Bg2}">
                            <Image Source="plus_filled.png" HeightRequest="30" WidthRequest="30" Margin="-8" />
                        </Frame>
                        <Label Text="{i18n:Translate Text=Receive.addAmount}" VerticalOptions="CenterAndExpand" TextColor="{DynamicResource FgSuccess}" FontFamily="{StaticResource Key=Sans-Bold}" FontSize="Caption" />

                        <StackLayout.GestureRecognizers>
                            <TapGestureRecognizer Command="{Binding ShowShareIntentCommand}" NumberOfTapsRequired="1" />
                        </StackLayout.GestureRecognizers>
                    </StackLayout>

                    <StackLayout Orientation="Horizontal" HorizontalOptions="Center" Spacing="12">
                        <Frame CornerRadius="50" BackgroundColor="{DynamicResource Bg2}">
                            <Image Source="share_filled.png" HeightRequest="30" WidthRequest="30" Margin="-8" />
                        </Frame>
                        <Label Text="{i18n:Translate Text=Receive.share}" VerticalOptions="CenterAndExpand" TextColor="{DynamicResource FgSuccess}" FontFamily="{StaticResource Key=Sans-Bold}" FontSize="Caption" />

                        <StackLayout.GestureRecognizers>
                            <TapGestureRecognizer Command="{Binding ShowShareIntentCommand}" NumberOfTapsRequired="1" />
                        </StackLayout.GestureRecognizers>
                    </StackLayout>
                </StackLayout>
            </StackLayout>
        </FlexLayout>
    </ContentPage.Content>
</ContentPage>
